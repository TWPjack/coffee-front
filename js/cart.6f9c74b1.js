(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["cart"],{b789:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-breadcrumb",{attrs:{items:t.itemss}}),t._m(0),a("hr"),a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 my-5"},[a("b-table",{attrs:{striped:"",hover:"",items:t.cartArray,fields:t.fields},scopedSlots:t._u([{key:"cell(file)",fn:function(t){return[a("img",{staticStyle:{width:"50px"},attrs:{src:t.item.file}})]}},{key:"cell(price)",fn:function(e){return[a("p",[t._v(t._s(e.item.price))])]}},{key:"cell(count)",fn:function(e){return[a("div",{staticClass:"d-flex flex-row justify-content-center"},[a("button",{on:{click:function(a){return t.productSub(e.index)}}},[t._v("-")]),a("div",[t._v(t._s(e.item.count))]),a("button",{on:{click:function(a){return t.productPlus(e.index)}}},[t._v("+")])])]}},{key:"cell(allprice)",fn:function(e){return[a("p",[t._v("$"+t._s(e.item.price*e.item.count))])]}},{key:"cell(action)",fn:function(e){return[a("b-button",{attrs:{variant:"danger"},on:{click:function(a){return t.delProduct(e.index)}}},[a("font-awesome-icon",{attrs:{icon:["fas","trash"]}})],1)]}}])}),a("div",{staticClass:"d-flex flex-row justify-content-around"},[a("p",[t._v("總數量 "+t._s(t.allProductsAmount))]),a("p",[t._v("總金額 "+t._s(t.allProductsPrice))]),a("b-button",{attrs:{variant:"danger"},on:{click:function(e){return t.cleanTheCart()}}},[t._v(" 清空購物車 ")])],1)],1),a("div",{staticClass:"col-12 my-5"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-6"},[a("b-form-group",{attrs:{label:"付款方式"}},[a("b-form-radio-group",{attrs:{options:t.paymentMethodOptions,buttons:"",name:"radios-btn-default"},model:{value:t.paymentMethodselected,callback:function(e){t.paymentMethodselected=e},expression:"paymentMethodselected"}})],1)],1),a("div",{staticClass:"col-6"},[a("b-form-group",{attrs:{label:"運送方式"}},[a("b-form-radio-group",{attrs:{options:t.deliveryMethodOptions,buttons:"",name:"radios-btn-default"},model:{value:t.deliveryMethodselected,callback:function(e){t.deliveryMethodselected=e},expression:"deliveryMethodselected"}})],1)],1)])]),a("div",{staticClass:"col-12 my-5"},[a("div",{attrs:{id:"products"}},[a("b-container",[a("b-row",[a("b-col",{attrs:{cols:"12"}},[a("h3",{staticClass:"text-center"},[t._v("收件人資訊")]),a("b-form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[a("b-form-group",{attrs:{"label-for":"input-name",state:t.nameState,label:"姓名：","invalid-feedback":"格式不符"}},[a("b-form-input",{attrs:{id:"input-name",type:"text",placeholder:"請輸入姓名",state:t.nameState},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),a("b-form-group",{attrs:{"label-for":"input-phone",state:t.phoneState,label:"手機號碼：","invalid-feedback":"格式不符"}},[a("b-form-input",{attrs:{id:"input-phone",type:"number",placeholder:"請輸入手機號碼",state:t.phoneState},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1),a("b-form-group",{attrs:{"label-for":"input-address",state:t.addressState,label:"地址：","invalid-feedback":"格式不符"}},[a("b-form-input",{attrs:{id:"input-address",type:"text",placeholder:"請輸入地址",state:t.addressState},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}})],1),a("br"),a("br"),a("b-btn",{attrs:{type:"submit",variant:"success"}},[t._v("送出")])],1)],1)],1)],1)],1)])])])],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"title"},[a("h1",{staticClass:"font-weight-bold float-left pl-5 "},[t._v("購物車")])])}],n=(a("a434"),a("b0c0"),{name:"Home",data:function(){return{itemss:[{text:"首頁",to:{name:"Home"}},{text:"購物車",active:!0}],fields:[{key:"file",label:"圖片"},{key:"name",label:"品名"},{key:"price",label:"價格"},{key:"count",label:"數量"},{key:"allprice",label:"合計"},{key:"action",label:"操作"}],cartArray:this.$store.state.cartArray,cartState:"second",paymentMethodselected:"",paymentMethodOptions:[{text:"信用卡/金融卡",value:"creditCard"},{text:"銀行轉帳",value:"bankTransfer"}],deliveryMethodselected:"",deliveryMethodOptions:[{text:"便利商店取貨",value:"homeDelivery"},{text:"宅配",value:"convenienceStorePickup"}],name:"",phone:"",address:"",cargoState:"訂單已送出",ttt:{user:"",name:"",paymentMethod:"",deliveryMethod:"",phone:"",address:"",date:"",allProductsAmount:"",allProductsPrice:"",productsDetail:[],cargoState:""}}},computed:{nameState:function(){return 0===this.name.length?null:!(this.name.length>10)},phoneState:function(){return 0===this.phone.length?null:10===this.phone.length},addressState:function(){return 0===this.address.length?null:!(this.address.length>50||this.address.length<12)},allProductsAmount:function(){for(var t=0,e=0;e<this.cartArray.length;e++)t+=this.cartArray[e].count;return t},allProductsPrice:function(){for(var t=0,e=0,a=0;a<this.cartArray.length;a++)t=this.cartArray[a].count*this.cartArray[a].price,e+=t;return e},user:function(){return this.$store.state.user}},methods:{onSubmit:function(){var t=this;if(0===this.cartArray.length)this.$swal({icon:"error",title:"錯誤",text:"購物車是空的"});else{this.$data.ttt.user=this.user.name,this.$data.ttt.name=this.name,this.$data.ttt.paymentMethod=this.paymentMethodselected,this.$data.ttt.deliveryMethod=this.deliveryMethodselected,this.$data.ttt.phone=this.phone,this.$data.ttt.address=this.address;var e=new Date;this.$data.ttt.date=e,this.$data.ttt.allProductsAmount=this.allProductsAmount,this.$data.ttt.allProductsPrice=this.allProductsPrice;for(var a=0;a<this.cartArray.length;a++)delete this.cartArray[a].total;this.$data.ttt.productsDetail=this.cartArray,this.$data.ttt.cargoState=this.cargoState,this.axios.post("https://coffeec8763.herokuapp.com/orders/",this.$data.ttt).then((function(e){if(e.data.success){t.name="",t.paymentMethod="",t.deliveryMethod="",t.phone="",t.address="",t.allProductsAmount=null,t.allProductsPrice=null;var a=t.cartArray.length;t.cartArray.splice(0,a)}else t.$swal({icon:"error",title:"錯誤",text:e.data.message})})).catch((function(e){t.$swal({icon:"error",title:"錯誤",text:e.response.data.message})}))}},productPlus:function(t){this.cartArray[t].total>this.cartArray[t].count&&(this.cartArray[t].count+=1)},productSub:function(t){this.cartArray[t].count>1&&(this.cartArray[t].count-=1)},delProduct:function(t){this.$store.commit("delProduct",t)},cleanTheCart:function(){this.$store.commit("cleanTheCart")},cart:function(){return this.$store.state.cartArray},leftClick:function(){"third"===this.cartState?this.cartState="second":"second"===this.cartState&&(this.cartState="first")},rightClick:function(){"first"===this.cartState?this.cartState="second":"second"===this.cartState&&(this.cartState="third")}},mounted:function(){}}),i=n,o=a("2877"),c=Object(o["a"])(i,r,s,!1,null,"113e015e",null);e["default"]=c.exports}}]);
//# sourceMappingURL=cart.6f9c74b1.js.map